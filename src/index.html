<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./main.css" />
    <title>Squabs</title>
  </head>
  <body>
    <hero id="home">
      <!-- Navbar -->
      <navbar>
        <div class="container">
          <ul class="pt-8 flex items-center justify-between">
            <li>
              <a class="cursor-pointer text-lg font-medium" href="index.html"
                >Home</a
              >
            </li>
            <li>
              <a class="cursor-pointer text-lg font-medium" href="index.html"
                >The Park</a
              >
            </li>
            <li>
              <div class="bg-black bg-opacity-25 py-2 px-4 rounded-full">
                <a
                  class="cursor-pointer text-lg text-white font-medium"
                  href="./about.html"
                  >About Squabs</a
                >
              </div>
            </li>
            <li>
              <a class="cursor-pointer text-lg font-medium" href="index.html"
                >Buy a Merch</a
              >
            </li>
            <li>
              <a class="cursor-pointer text-lg font-medium" href="contact.html"
                >Buy a Squab</a
              >
            </li>
          </ul>
        </div>
      </navbar>

      <img
        class="hero-background invisible"
        src="<%=require('./assets/images/hero-buildings.png')%>"
        alt="NYC Buildings"
      />

      <img
        class="hero-logo"
        src="<%=require('./assets/images/squabs-nyc.png')%>"
        alt="Squabs"
      />

      <img
        class="hero-foreground"
        src="<%=require('./assets/images/hero-foreground.png')%>"
        alt="Foreground"
      />

      <img
        class="hero-squabs"
        src="<%=require('./assets/images/hero-birds.png')%>"
        alt="Squabs"
      />
    </hero>

    <div class="flex bg-black top-0 fixed w-screen h-screen z-50 video-wrapper">
      <video class="w-100 h-100" muted autoplay>
        <source
          src="<%=require('./assets/videos/intro.mp4')%>"
          type="video/mp4"
        />
      </video>
    </div>

    <script>
      let videoWrapper = document.querySelector(".video-wrapper");
      let video = document.querySelector("video");

      // Initially disable scrolling
      disableScrolling();

      function disableScrolling() {
        var x = window.scrollX;
        var y = window.scrollY;
        window.onscroll = function () {
          window.scrollTo(x, y);
        };
      }

      function enableScrolling() {
        window.onscroll = function () {};
      }


      // Enable scrolling when video ends
      video.addEventListener(
        "ended",
        function () {
          video.style.display = "none";
          videoWrapper.style.display = "none";
          enableScrolling();
        },
        false
      );
    </script>

    <!-- The Park -->
    <section class="py-60 z-10 bg-brand-black" id="park">
      <div class="container">
        <div class="grid grid-cols-2 gap-4">
          <div>
            <h1 class="text-white text-6xl">The Park</h1>
            <div class="mt-12">
              <p class="text-white text-lg">
                The PARK will become operational once the presale preiod is
                over. It contains a canvas accessible only to wallets containing
                at least one SQUAB. Like any good park, this is the place at
                drawsrawl, or write expletives Each NFT-holder will be able to
                paint a pixel on the wall every fifteen minustes. Think of it as
                a collaborative art experiment for the cryptoshphere. A
                members-only canvas for the discerning minds of crypto twitter.
              </p>
            </div>
          </div>
          <div class="relative">
            <img
              class="absolute canvas"
              src="<%=require('./assets/images/canvas.png')%>"
              alt="Canvas"
            />
          </div>
        </div>
      </div>
    </section>

    <footer class="bg-brand-gray-dark">
      <div class="container">
        <div
          class="w-8/12 md:w-2/12 pt-32 pb-24 mx-auto flex items-center justify-between"
        >
          <div>
            <a href="https://www.instagram.com/squabsnyc/" target="_blank">
              <img
                src="<%=require('./assets/images/icons/instagram.svg')%>"
                alt="Instagram"
              />
            </a>
          </div>
          <div>
            <a href="https://twitter.com/squabsnyc" target="_blank">
              <img
                src="<%=require('./assets/images/icons/twitter.svg')%>"
                alt="Twitter"
              />
            </a>
          </div>
          <div>
            <a
              href="https://discord.com/channels/@me/929556556880687125"
              target="_blank"
            >
              <img
                src="<%=require('./assets/images/icons/discord.svg')%>"
                alt="Discord"
              />
            </a>
          </div>
          <div>
            <a href="https://www.youtube.com/channel/UCHMsjMZBpgirAl-wjNU6Qtg>">
              <img
                src="<%=require('./assets/images/icons/youtube.svg')%>"
                alt="Instagram"
              />
            </a>
          </div>
        </div>
      </div>
    </footer>
    <style>
      .slide-in {
        opacity: 0;
        transition: 1s;
      }
      .active {
        opacity: 1;
        transition: transform 0.5s;
        -webkit-transition: transform 0.5s;
        transform: translateX(0%);
      }
    </style>
    <script>
      let squabsLogo = document.querySelector(".hero-logo");
      let foreground = document.querySelector(".hero-background");
      let canvas = document.querySelector(".canvas");

      let initialCanvasLeft = canvas.offsetLeft;

      let oldValue = 0;
      let newValue = 0;

      // window.addEventListener("scroll", function () {
      //   const slideInAt =
      //     window.scrollY + window.innerHeight - canvas.height / 2;
      //   const canvasTop =
      //     canvas.getBoundingClientRect().top +
      //     document.documentElement.scrollTop;
      //   const imageBottom = canvas.height + canvasTop;
      //   const isHalfShown = slideInAt > canvasTop;
      //   const isNoScrolledPast = window.scrollY < imageBottom;
      //   console.log(canvas.offsetTop);
      //   if (isHalfShown && isNoScrolledPast) {
      //     canvas.classList.add("active");
      //   } else {
      //     canvas.classList.remove("active");
      //   }
      // });

      window.addEventListener("scroll", function () {
        let value = window.scrollY;

        if (value * 0.05 <= 40) {
          squabsLogo.style.top = value * 0.05 + "%";
        }
        foreground.style.top = value * 1 + "px";

        let canvasLeft = canvas.offsetLeft;

        newValue = window.pageYOffset;
        if (oldValue < newValue) {
          if (canvasLeft >= 0) {
            canvas.style.left = canvasLeft - 10 + "px";
          }

          console.log("Down");
        } else if (oldValue > newValue) {
          if (canvasLeft <= initialCanvasLeft) {
            canvas.style.left = canvasLeft + 10 + "px";
          }

          console.log("Up");
        }
        oldValue = newValue;

        console.log("Top: " + oldValue);
        console.log("Current" + canvasLeft);
        console.log(canvas.height, "height");
      });
    </script>
  </body>
</html>
